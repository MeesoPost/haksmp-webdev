---
// Utrecht web components loader - properly initializes Utrecht components
---

<slot />

<script>
  // Only run in browser environment
  if (typeof window !== 'undefined') {
    // Define initialization function
    async function initializeUtrecht() {
      try {
        // Import Utrecht components
        const { defineCustomElements } = await import('@utrecht/web-component-library-stencil/loader');
        
        // Initialize the custom elements
        defineCustomElements(window);
        
        console.log('Utrecht web components initialized successfully');
        
        // Dispatch ready event
        window.dispatchEvent(new CustomEvent('utrecht-ready'));
        
      } catch (error) {
        console.error('Failed to initialize Utrecht components:', error);
      }
    }
    
    // Initialize when DOM is ready
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initializeUtrecht);
    } else {
      initializeUtrecht();
    }
  }
</script>